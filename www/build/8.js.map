{"version":3,"sources":["../../src/pages/chats/chats.module.ts","../../src/pages/chats/chats.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ChatsPage } from './chats';\n\n@NgModule({\n  declarations: [\n    ChatsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ChatsPage),\n  ],\n})\nexport class ChatsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chats/chats.module.ts","import { Component, NgZone } from '@angular/core';\nimport { IonicPage, NavController, NavParams ,Events, AlertController, PopoverController, LoadingController} from 'ionic-angular';\nimport { RequestsProvider } from '../../providers/requests/requests';\nimport { ChatProvider } from '../../providers/chat/chat';\nimport { UserProvider } from '../../providers/user/user';\n\nimport { ImagehandlerProvider } from '../../providers/imagehandler/imagehandler';\nimport firebase from 'firebase';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-chats',\n  templateUrl: 'chats.html',\n})\nexport class ChatsPage {\n  myrequests;\n  myfriends;\n  // messagecounter;\n  requestcounter=null;\n  username : string;\n  avatar:string;\n  constructor(public navCtrl: NavController, public navParams: NavParams, public requestservice: RequestsProvider,public events: Events, public alertCtrl : AlertController, public chatservice : ChatProvider,public zone :NgZone,public popoverCtrl : PopoverController, public imghandler: ImagehandlerProvider, public userservice: UserProvider, public loadingCtrl: LoadingController) {\n    this.setStatus();\n    // this.events.subscribe('counter', () => {\n    //   this.zone.run(()=>{\n    //     this.messagecounter= this.chatservice.msgcount;\n    //     console.log(this.messagecounter);\n    //   })\n    // })\n\n  }\n\n  ionViewWillEnter() {\n    let loader = this.loadingCtrl.create({\n      content: 'Please wait'\n    });\n    loader.present();\n\n    this.requestservice.getmyrequests();\n    this.requestservice.getmyfriends();\n     this.loaduserdetails();\n\n    this.myfriends = [];\n    this.events.subscribe('gotrequests', () => {\n      this.myrequests = [];\n      this.myrequests = this.requestservice.userdetails;\n      console.log('this.myrequests',this.myrequests);\n      loader.dismiss();\n      if(this.myrequests){\n        this.requestcounter =this.myrequests.length;\n      }\n    })\n    this.events.subscribe('friends', () => {\n      this.myfriends = [];\n      this.myfriends = this.requestservice.myfriends;\n      console.log('myfriends',this.myfriends);\n      loader.dismiss();\n      // for(let i = 0;i<this.myfriends.length;i++){\n      //\n      //   console.log('requestcounter',this.requestcounter)\n      //   console.log('user > ',this.myfriends[i])\n      //   this.chatservice.getmsgCounter(this.myfriends[i]);\n      // }\n\n    })\n  }\n\n  addbuddy() {\n    this.navCtrl.push('BuddiesPage');\n  }\n  buddychat(buddy) {\n    this.chatservice.initializebuddy(buddy);\n    this.navCtrl.push('BuddychatPage');\n  }\n  setStatus(){\n    this.chatservice.setstatusUser().then((res)=>{\n      if(res){\n        console.log('User Online');\n      }\n    }).catch((err)=>{\n        alert(err);\n    })\n  }\n  presentPopover(myEvent) {\n   let popover = this.popoverCtrl.create('RequestPage',{});\n     popover.present({\n       ev: myEvent\n     });\n   }\n   //profile data\nloaduserdetails() {\n     this.userservice.getuserdetails().then((res: any) => {\n       this.username = res.displayName;\n       this.zone.run(() => {\n         this.avatar = res.photoURL;\n       })\n     })\n   }\n   logout() {\n     this.chatservice.setStatusOffline().then((res)=>{\n       if(res){\n         firebase.auth().signOut().then(() => {\n           this.navCtrl.setRoot('LoginPage');\n         })\n       }\n     })\n    }\n\n    editname() {\n      let statusalert = this.alertCtrl.create({\n        buttons: ['okay']\n      });\n      let alert = this.alertCtrl.create({\n        title: 'Edit Nickname',\n        inputs: [{\n          name: 'nickname',\n          placeholder: 'Nickname'\n        }],\n        buttons: [{\n          text: 'Cancel',\n          role: 'cancel',\n          handler: data => {\n\n          }\n        },\n        {\n          text: 'Edit',\n          handler: data => {\n            if (data.nickname) {\n              this.userservice.updatedisplayname(data.nickname).then((res: any) => {\n                if (res.success) {\n                  statusalert.setTitle('Updated');\n                  statusalert.setSubTitle('Your username has been changed successfully!!');\n                  statusalert.present();\n                  this.zone.run(() => {\n                    this.username = data.nickname;\n                  })\n                }\n\n                else {\n                  statusalert.setTitle('Failed');\n                  statusalert.setSubTitle('Your username was not changed');\n                  statusalert.present();\n                }\n\n              })\n            }\n          }\n\n        }]\n      });\n      alert.present();\n    }\n    editimage() {\n      let statusalert = this.alertCtrl.create({\n        buttons: ['okay']\n      });\n      this.imghandler.uploadimage().then((url: any) => {\n        this.userservice.updateimage(url).then((res: any) => {\n          if (res.success) {\n            statusalert.setTitle('Updated');\n            statusalert.setSubTitle('Your profile pic has been changed successfully!!');\n            statusalert.present();\n            this.zone.run(() => {\n            this.avatar = url;\n          })\n          }\n        }).catch((err) => {\n            statusalert.setTitle('Failed');\n            statusalert.setSubTitle('Your profile pic was not changed');\n            statusalert.present();\n        })\n        })\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chats/chats.ts"],"sourceRoot":""}